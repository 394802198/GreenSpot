var app=angular.module("GreenSpotApp",["ngRoute","ngAnimate","toastr","angularUtils.directives.dirPagination","myModule.filters","ui.bootstrap","ngKeditor"],["$httpProvider",function(e){e.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var t=function(e){var n,o,r,i,a,l,s,u="";for(n in e)if(o=e[n],o instanceof Array)for(s=0;s<o.length;++s)a=o[s],r=n+"["+s+"]",l={},l[r]=a,u+=t(l)+"&";else if(o instanceof Object)for(i in o)a=o[i],r=n+"["+i+"]",l={},l[r]=a,u+=t(l)+"&";else void 0!==o&&null!==o&&(u+=encodeURIComponent(n)+"="+encodeURIComponent(o)+"&");return u.length?u.substr(0,u.length-1):u};e.defaults.transformRequest=[function(e){return angular.isObject(e)&&"[object File]"!==String(e)?t(e):e}]}]);
app.config(["toastrConfig","$locationProvider",function(t,o){o.html5Mode(!0).hashPrefix("!"),angular.extend(t,{allowHtml:!1,autoDismiss:!1,closeButton:!1,closeHtml:"<button>&times;</button>",containerId:"toast-container",messageClass:"toast-message",positionClass:"toast-bottom-right",timeOut:3e3})}]);
app.run(["$rootScope","$location","sessionService","authorizationService",function(a,n,e,t){a.isLoggedIn=!0;var r="/manager";a.$on("$routeChangeStart",function(i){if(-1!==n.path().indexOf(r)){var o=e.isLoggedIn();o.then(function(r){if("NO"===r)a.isLoggedIn=!1,n.path("/manager/login");else{"/manager"!==n.path().substring(0,"/manager".length)&&n.path("/manager/home"),a.isLoggedIn=!0;var i=t.getAuthorizationLinkagesPath(),o=!1;for(var g in i)if(-1!==n.path().indexOf(i[g])){o=!0;break}if(o){var h="",s=!1;e.getManagerSession().then(function(a){h=a.authorized_paths.split(",");for(var e in h)if(-1!==n.path().indexOf(h[e])){s=!0;break}s||n.path("/manager/home")})}}})}for(var g=["/support_center","/manager","/"],h=0;h<g.length;h++)if(n.path().substring(0,g[h].length)===g[h]){a.currentNav=g[h];break}})}]);
function HomeController(t,o,e,n,c,r,i,s){function u(){r.getHomeInfo().then(function(o){t.home_info=o})}t.home_info={productComboLength:0,productFeatureLength:0,planLength:0,deviceLength:0,addOnServiceLength:0,managerLength:0,messageLength:0,messageNotRepliedLength:0},u(),t.contactUs={},t.submitContact=function(){t.isSubmitDisabled=!0,o.post("/api/contact_us/submitContact",t.contactUs).success(function(o,r,i,s){if(o.hasErrors)e.toastWarning(o.errorMap),t.isSubmitDisabled=!1;else{e.toastInfo(o.successMap),n(function(){t.isSubmitDisabled=!1},2e4),t.contactUs.countDown=20;var u=c(function(){1==t.contactUs.countDown&&c.cancel(u),t.contactUs.countDown--},1e3)}}).error(function(t,o,e,n){})},i.getAll().then(function(o){t.productFeatures=o}),s.getFirstThree().then(function(o){t.productCombos=o;for(var e in t.productCombos)t.productCombos[e].feature_ids=t.productCombos[e].feature_ids.split("^_greenspot_^")})}HomeController.$inject=["$scope","$http","commonUtilService","$timeout","$interval","homeService","homeProductFeatureService","homeProductComboService"],app.controller("HomeController",HomeController);
function PaymentController(e,i,n,r){e.productCombo={id:n.id},e.service={business_type:"Hotel",is_new_shipping_address:"NO",shipping_fee:10},e.service_plans=[],e.service_devices=[],e.service_addon_services=[],e.service_total_payable=0,e.checkout=function(){var i="",n="",s="";for(var c in e.service_plans)i+=e.service_plans[c].id,c<e.service_plans.length-1&&(i+="^_greenspot_^");for(var a in e.service_devices)n+=e.service_devices[a].id+"|"+e.service_devices[a].qty,a<e.service_devices.length-1&&(n+="^_greenspot_^");for(var v in e.service_addon_services)s+=e.service_addon_services[v].id,v<e.service_addon_services.length-1&&(s+="^_greenspot_^");e.service.plan_ids=i,e.service.device_ids_and_qty=n,e.service.addon_service_ids=s,e.service.total_amount=e.service_total_payable,r.checkout(e.service)},e.changePlan=function(i,n){i=JSON.parse(i);for(var r in e.service_plans)if(e.service_plans[r].id==n.id){for(var s in e.service_devices)e.service_devices[s]=i.devices[0];e.service_plans[r]=i}e.getServiceTotalPrice()},e.changeQty=function(i,n){for(var r in e.service_devices)e.service_devices[r].id==n.id&&(e.service_devices[r].qty=i,e.service_devices[r].is_changing_qty="NO");e.getServiceTotalPrice()},e.changeCombo=function(e){i.path("/payment/"+e)},e.getServiceTotalPrice=function(){var i=0,n=0,r=e.service_plans;for(var s in r){"undefined"!=typeof r[s].annual_fee&&(i+=Number(r[s].annual_fee));for(var c in r[s].devices)"undefined"!=typeof r[s].devices[c].annual_fee&&(n+=Number(r[s].devices[c].annual_fee)*Number(r[s].devices[c].qty))}e.service_total_payable=Number(i)+Number(n)+Number(e.service.shipping_fee),e.service_total_payable=Number(e.service_total_payable).toFixed(2)},r.getProductComboAndDetailsById(e.productCombo).then(function(i){e.productCombo=i;var n=e.productCombo.plans;for(var r in n){"undefined"!=typeof n[r].annual_fee&&(n[r].annual_fee=Number(n[r].annual_fee).toFixed(2),e.service_plans.push(n[r]));for(var s in n[r].devices)"undefined"!=typeof n[r].devices[s].annual_fee&&(n[r].devices[s].annual_fee=Number(n[r].devices[s].annual_fee).toFixed(2),e.service_devices.push(n[r].devices[s]))}e.service.shipping_fee=Number(e.productCombo.shipping_fee).toFixed(2),e.getServiceTotalPrice()}),r.getFirstThree().then(function(i){e.productCombos=i}),r.getAllPlanHasDevice().then(function(i){e.plans=[];for(var n in i){var r={};r.id=i[n].id,r.name=i[n].name,r.annual_fee=Number(i[n].annual_fee).toFixed(2),r.is_changing_plan=i[n].is_changing_plan,r.has_device=i[n].has_device,r.devices=i[n].devices,r.brief_description=i[n].brief_description,e.plans.push(r)}})}PaymentController.$inject=["$scope","$location","$routeParams","paymentService"],app.controller("PaymentController",PaymentController);
var timer=null;app.directive("homeDirective",["$interval","$timeout","$document","$window",function(e,a,o,t){return{restrict:"A",link:function(a,o,l){function i(){$(".page-body-outer").css("position","static");var e=74;$(document).width()+17<768&&(e=50);var a=$("#home_top_bg_div").offset().top+1,o=$("#how_it_works").offset().top-e,t=$("#promotion_bg_div").offset().top-e,l=$("#related_method").offset().top-e,i=$("#price_div").offset().top-e,n={home_top_bg_div:a,how_it_works:o,promotion_bg_div:t,related_method:l,price_div:i};return $(".page-body-outer").css("position","relative"),n}function n(a){var o=$(".page-body-outer");e.cancel(d),d=e(function(){var t=(a-o.scrollTop())/8;t=t>0?Math.ceil(t):Math.floor(t),o.scrollTop()==a||o.scrollTop()!=a&&0===a?e.cancel(d):o.scrollTop(s+t),0===o.scrollTop()&&e.cancel(d),s=o.scrollTop()},15)}var s=0,r="";i(),$("#play_video").click(function(){$("#viewVideoModal").modal("show"),$("#ytplayer").html('<iframe id="youtube_player" frameborder="0" vspace="0" hspace="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" scrolling="auto" height="auto" width="auto" src="//www.youtube.com/embed/PrXy9B-6OOM?controls=1&amp;hd=1&amp;autoplay=1&amp;showinfo=0&amp;rel=0"></iframe>')}),$("#viewVideoModal").on("hidden.bs.modal",function(){$("#ytplayer").html("")}),$("#mobileStepCarousel").on("slid.bs.carousel",function(){var e=$(".carousel-inner").children(".active").attr("data-step");$('li[data-name="carousel_steps_guide_list_li"]').removeClass(),$('li[data-step="'+e+'"]').addClass("active")});var c=function(){$(".page-body-outer").scrollTop()<=$(t).height()/2?$("#header_navigator").hide("fast","linear"):$("#header_navigator").show("fast","linear")};$(".page-body-outer").scroll(function(){c()}),c();var d;$('a[data-name="navigator_target"]').click(function(){r!==$(this).attr("data-val")&&n(i()[$(this).attr("data-val")]),r=$(this).attr("data-val")});var p=function(a){a=a||window.event,a.wheelDelta?(a.wheelDelta>0&&e.cancel(d),a.wheelDelta<0&&e.cancel(d)):a.detail&&(a.detail>0&&e.cancel(d),a.detail<0&&e.cancel(d))};document.addEventListener&&document.addEventListener("DOMMouseScroll",p,!1),window.onmousewheel=document.onmousewheel=p,$('button[data-target="#navbar_site"]').click(function(){$("#navbar_site").hasClass("in")?$("#navbar_site").css("display","none"):$("#navbar_site").css("display","block")}),$("#technical_information_a").click(function(){$(this).hasClass("collapsed")?($("#technical_information_span").transition({rotate:"45deg"}),$(this).removeClass("collapsed"),$("#collapseOne").collapse("show")):($("#technical_information_span").transition({rotate:"0deg"}),$(this).addClass("collapsed"),$("#collapseOne").collapse("hide"))})}}}]);
angular.module("myModule.filters",[]).filter("authorized_linkages_filter",function(){return function(r,n){var e={};for(var i in r)for(var f in n)-1!==i.indexOf(n[f])&&(e[i]=r[i]);return e}});
app.filter("sanitize",["$sce",function(t){return function(n){return t.trustAsHtml(n)}}]);
app.config(["$routeProvider",function(e){e.when("/",{templateUrl:"pages/home.html",controller:HomeController}).when("/more_e_shop",{templateUrl:"pages/more_e_shop.html"}).otherwise({redirectTo:"/"})}]);
app.config(["$routeProvider",function(e){e.when("/manager/login",{templateUrl:"pages/manager/login.html",controller:SessionController}).when("/manager/home",{templateUrl:"pages/manager/home.html",controller:HomeController}).when("/manager/my_profile",{templateUrl:"pages/manager/my_profile.html",controller:MyProfileController}).when("/manager/product/product_combo/all",{templateUrl:"pages/manager/product/product_combo/all_product_combos.html",controller:AllProductCombosController}).when("/manager/product/product_combo/new",{templateUrl:"pages/manager/product/product_combo/new_product_combo.html",controller:NewProductComboController}).when("/manager/product/product_combo/edit/:id/:pay_frequency_on_home_page/:is_on_home_page/:is_on_shelf",{templateUrl:"pages/manager/product/product_combo/edit_product_combo.html",controller:EditProductComboController}).when("/manager/product/product_feature/all",{templateUrl:"pages/manager/product/product_feature/all_product_features.html",controller:AllProductFeaturesController}).when("/manager/product/product_feature/new",{templateUrl:"pages/manager/product/product_feature/new_product_feature.html",controller:NewProductFeatureController}).when("/manager/product/product_feature/edit/:id/:is_on_home_page",{templateUrl:"pages/manager/product/product_feature/edit_product_feature.html",controller:EditProductFeatureController}).when("/manager/product/plan/all",{templateUrl:"pages/manager/product/plan/all_plans.html",controller:AllPlansController}).when("/manager/product/plan/new",{templateUrl:"pages/manager/product/plan/new_plan.html",controller:NewPlanController}).when("/manager/product/plan/edit/:id/:is_lump_accepted/:is_weekly_accepted/:is_monthly_accepted/:is_annual_accepted/:is_on_shelf",{templateUrl:"pages/manager/product/plan/edit_plan.html",controller:EditPlanController}).when("/manager/product/device/all",{templateUrl:"pages/manager/product/device/all_devices.html",controller:AllDevicesController}).when("/manager/product/device/new",{templateUrl:"pages/manager/product/device/new_device.html",controller:NewDeviceController}).when("/manager/product/device/edit/:id/:is_lump_accepted/:is_weekly_accepted/:is_monthly_accepted/:is_annual_accepted/:is_on_shelf",{templateUrl:"pages/manager/product/device/edit_device.html",controller:EditDeviceController}).when("/manager/product/addon_service/all",{templateUrl:"pages/manager/product/addon_service/all_addon_services.html",controller:AllAddonServicesController}).when("/manager/product/addon_service/new",{templateUrl:"pages/manager/product/addon_service/new_addon_service.html",controller:NewAddonServiceController}).when("/manager/product/addon_service/edit/:id/:is_lump_accepted/:is_weekly_accepted/:is_monthly_accepted/:is_annual_accepted/:is_on_shelf",{templateUrl:"pages/manager/product/addon_service/edit_addon_service.html",controller:EditAddonServiceController}).when("/manager/all",{reloadOnSearch:!1,templateUrl:"pages/manager/manager/all_managers.html",controller:AllManagersController}).when("/manager/edit/:id",{templateUrl:"pages/manager/manager/edit_manager.html",controller:EditManagerController}).when("/manager/new",{templateUrl:"pages/manager/manager/new_manager.html",controller:NewManagerController}).when("/manager/contact_us/message/all",{reloadOnSearch:!1,templateUrl:"pages/manager/contact_us/all_messages.html",controller:AllMessagesController}).when("/manager/contact_us/message/edit/:id",{templateUrl:"pages/manager/contact_us/edit_message.html",controller:EditMessageController})}]);
app.config(["$routeProvider",function(e){e.when("/payment/:id",{templateUrl:"pages/payment/home.html",controller:PaymentController})}]);
app.config(["$routeProvider",function(e){e.when("/support_center",{templateUrl:"pages/support_center/index.html"}).when("/support_center/how_do_you_choose_your_authentication_method",{templateUrl:"pages/support_center/how_do_you_choose_your_authentication_method.html"}).when("/support_center/set_your_customers_wifi_time",{templateUrl:"pages/support_center/set_your_customers_wifi_time.html"}).when("/support_center/choose_a_templet_for_your_wifi_authentication_page",{templateUrl:"pages/support_center/choose_a_templet_for_your_wifi_authentication_page.html"}).when("/support_center/upload_your_logo_contact_and_info_to_authentication_page",{templateUrl:"pages/support_center/upload_your_logo_contact_and_info_to_authentication_page.html"}).when("/support_center/upload_your_promotion_images",{templateUrl:"pages/support_center/upload_your_promotion_images.html"}).when("/support_center/set_black_white_list",{templateUrl:"pages/support_center/set_black_white_list.html"}).when("/support_center/how_you_set_membership_card",{templateUrl:"pages/support_center/how_you_set_membership_card.html"}).when("/support_center/change_your_password",{templateUrl:"pages/support_center/change_your_password.html"}).when("/support_center/sms_topup",{templateUrl:"pages/support_center/sms_topup.html"}).when("/support_center/check_dashboard",{templateUrl:"pages/support_center/check_dashboard.html"}).when("/support_center/check_user_list",{templateUrl:"pages/support_center/check_user_list.html"}).when("/support_center/e_shop/general",{templateUrl:"pages/support_center/e_shop/general.html"}).when("/support_center/e_shop/template",{templateUrl:"pages/support_center/e_shop/template.html"}).when("/support_center/e_shop/ads",{templateUrl:"pages/support_center/e_shop/ads.html"}).when("/support_center/e_shop/section",{templateUrl:"pages/support_center/e_shop/section.html"}).when("/support_center/e_shop/information",{templateUrl:"pages/support_center/e_shop/information.html"}).when("/support_center/e_shop/message",{templateUrl:"pages/support_center/e_shop/message.html"})}]);
app.factory("commonUtilService",["toastr",function(n){function r(n){var r=[];for(var t in n)r.push(n[t]);return r}return{toastWarning:function(t){for(var o=r(t),a=o.length;a>0;a--)n.warning(o[a-1])},toastError:function(t){for(var o=r(t),a=o.length;a>0;a--)n.error(o[a-1])},toastInfo:function(t){for(var o=r(t),a=o.length;a>0;a--)n.info(o[a-1])},toastSuccess:function(t){for(var o=r(t),a=o.length;a>0;a--)n.success(o[a-1])}}}]);
function MyProfileController(e,o,r){function n(){o.getManagerSession().then(function(o){e.manager=o})}e.manager={},n(),e.updateMyProfile=function(e){r.updateMyProfile(e)}}MyProfileController.$inject=["$scope","sessionService","managerService"],app.controller("MyProfileController",MyProfileController);
function SessionController(o,n){o.login=function(o){n.login(o)},o.logout=function(){n.logout()}}SessionController.$inject=["$scope","sessionService"],app.controller("SessionController",SessionController);
app.directive("icheck",["$timeout",function(c){return{restrict:"A",require:"?ngModel",scope:{checkboxClass:"=",radioClass:"=",ngModel:"="},link:function(e,n,i){switch(n.iCheck({checkboxClass:n.attr("checkboxClass"),radioClass:n.attr("radioClass")}),n.context.type){case"checkbox":e.ngModel&&n.iCheck("check"),n.on("ifChecked",function(){c(function(){e.$apply(function(){e.ngModel=!0})})}),n.on("ifUnchecked",function(){c(function(){e.$apply(function(){e.ngModel=!1})})});break;case"radio":e.ngModel===n.val()&&n.iCheck("check"),n.on("ifChecked",function(){c(function(){e.$apply(function(){e.ngModel=n.val()})})})}}}}]).directive("icheckSelector",["$document",function(c){return{restrict:"A",link:function(e,n,i){n.on("change",function(){var e=n.val();c.find(":checkbox[data-icheck-checkbox]").iCheck("uncheck"),c.find(":checkbox[data-icheck-"+e+"]").iCheck("check")})}}}]);
!function(){function e(e,t,n){function i(i,c){var l=c.dirPaginate,d=l.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),p=/\|\s*itemsPerPage\s*:[^|\)]*/;if(null===d[2].match(p))throw"pagination directive: the 'itemsPerPage' filter must be set.";var f=d[2].replace(p,""),h=t(f);o(i);var m=c.paginationId||u;return n.registerInstance(m),function(i,o,c){var d=t(c.paginationId)(i)||c.paginationId||u;n.registerInstance(d);var p=a(l,d);r(o,c,p),s(o);var f=e(o),m=g(i,c,d);n.setCurrentPageParser(d,m,i),"undefined"!=typeof c.totalItems?(n.setAsyncModeTrue(d),i.$watch(function(){return t(c.totalItems)(i)},function(e){e>=0&&n.setCollectionLength(d,e)})):i.$watchCollection(function(){return h(i)},function(e){e&&n.setCollectionLength(d,e.length)}),f(i)}}function a(e,t){var n,i=!!e.match(/(\|\s*itemsPerPage\s*:[^|]*:[^|]*)/);return n=t===u||i?e:e.replace(/(\|\s*itemsPerPage\s*:[^|]*)/,"$1 : '"+t+"'")}function r(e,t,n){e[0].hasAttribute("dir-paginate-start")||e[0].hasAttribute("data-dir-paginate-start")?(t.$set("ngRepeatStart",n),e.eq(e.length-1).attr("ng-repeat-end",!0)):t.$set("ngRepeat",n)}function o(e){angular.forEach(e,function(e){1===e.nodeType&&angular.element(e).attr("dir-paginate-no-compile",!0)})}function s(e){angular.forEach(e,function(e){1===e.nodeType&&angular.element(e).removeAttr("dir-paginate-no-compile")}),e.eq(0).removeAttr("dir-paginate-start").removeAttr("dir-paginate").removeAttr("data-dir-paginate-start").removeAttr("data-dir-paginate"),e.eq(e.length-1).removeAttr("dir-paginate-end").removeAttr("data-dir-paginate-end")}function g(e,n,i){var a;if(n.currentPage)a=t(n.currentPage);else{var r=i+"__currentPage";e[r]=1,a=t(r)}return a}return{terminal:!0,multiElement:!0,compile:i}}function t(){return{priority:5e3,terminal:!0}}function n(e){e.put("angularUtils.directives.dirPagination.template",'<ul class="pagination" ng-if="1 < pages.length || !autoHide"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by $index" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == \'...\' || ( ! autoHide && pages.length === 1 ) }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul>')}function i(e,t){function n(t,n,a){function o(n){e.isRegistered(d)&&c(n)&&(t.pages=i(n,e.getCollectionLength(d),e.getItemsPerPage(d),f),t.pagination.current=n,g(),t.onPageChange&&t.onPageChange({newPageNumber:n}))}function s(){if(e.isRegistered(d)){var n=parseInt(e.getCurrentPage(d))||1;t.pages=i(n,e.getCollectionLength(d),e.getItemsPerPage(d),f),t.pagination.current=n,t.pagination.last=t.pages[t.pages.length-1],t.pagination.last<t.pagination.current?t.setCurrent(t.pagination.last):g()}}function g(){if(e.isRegistered(d)){var n=e.getCurrentPage(d),i=e.getItemsPerPage(d),a=e.getCollectionLength(d);t.range.lower=(n-1)*i+1,t.range.upper=Math.min(n*i,a),t.range.total=a}}function c(e){return r.test(e)&&e>0&&e<=t.pagination.last}var l=a.paginationId||u,d=t.paginationId||a.paginationId||u;if(!e.isRegistered(d)&&!e.isRegistered(l)){var p=d!==u?" (id: "+d+") ":" ";console.warn("Pagination directive: the pagination controls"+p+"cannot be used without the corresponding pagination directive, which was not found at link time.")}t.maxSize||(t.maxSize=9),t.autoHide=void 0===t.autoHide?!0:t.autoHide,t.directionLinks=angular.isDefined(a.directionLinks)?t.$parent.$eval(a.directionLinks):!0,t.boundaryLinks=angular.isDefined(a.boundaryLinks)?t.$parent.$eval(a.boundaryLinks):!1;var f=Math.max(t.maxSize,5);t.pages=[],t.pagination={last:1,current:1},t.range={lower:1,upper:1,total:1},t.$watch(function(){return e.isRegistered(d)?(e.getCollectionLength(d)+1)*e.getItemsPerPage(d):void 0},function(e){e>0&&s()}),t.$watch(function(){return e.isRegistered(d)?e.getItemsPerPage(d):void 0},function(e,n){e!=n&&"undefined"!=typeof n&&o(t.pagination.current)}),t.$watch(function(){return e.isRegistered(d)?e.getCurrentPage(d):void 0},function(e,t){e!=t&&o(e)}),t.setCurrent=function(t){e.isRegistered(d)&&c(t)&&(t=parseInt(t,10),e.setCurrentPage(d,t))}}function i(e,t,n,i){var r,o=[],s=Math.ceil(t/n),g=Math.ceil(i/2);r=g>=e?"start":e>s-g?"end":"middle";for(var u=s>i,c=1;s>=c&&i>=c;){var l=a(c,e,i,s),d=2===c&&("middle"===r||"end"===r),p=c===i-1&&("middle"===r||"start"===r);o.push(u&&(d||p)?"...":l),c++}return o}function a(e,t,n,i){var a=Math.ceil(n/2);return e===n?i:1===e?e:i>n?t>i-a?i-n+e:t>a?t-a+e:e:e}var r=/^\d+$/;return{restrict:"AE",templateUrl:function(e,n){return n.templateUrl||t.getPath()},scope:{maxSize:"=?",onPageChange:"&?",paginationId:"=?",autoHide:"=?"},link:n}}function a(e){return function(t,n,i){if("undefined"==typeof i&&(i=u),!e.isRegistered(i))throw"pagination directive: the itemsPerPage id argument (id: "+i+") does not match a registered pagination-id.";var a,r;return t instanceof Array?(n=parseInt(n)||9999999999,r=e.isAsyncMode(i)?0:(e.getCurrentPage(i)-1)*n,a=r+n,e.setItemsPerPage(i,n),t.slice(r,a)):t}}function r(){var e,t={};this.registerInstance=function(n){"undefined"==typeof t[n]&&(t[n]={asyncMode:!1},e=n)},this.isRegistered=function(e){return"undefined"!=typeof t[e]},this.getLastInstanceId=function(){return e},this.setCurrentPageParser=function(e,n,i){t[e].currentPageParser=n,t[e].context=i},this.setCurrentPage=function(e,n){t[e].currentPageParser.assign(t[e].context,n)},this.getCurrentPage=function(e){var n=t[e].currentPageParser;return n?n(t[e].context):1},this.setItemsPerPage=function(e,n){t[e].itemsPerPage=n},this.getItemsPerPage=function(e){return t[e].itemsPerPage},this.setCollectionLength=function(e,n){t[e].collectionLength=n},this.getCollectionLength=function(e){return t[e].collectionLength},this.setAsyncModeTrue=function(e){t[e].asyncMode=!0},this.isAsyncMode=function(e){return t[e].asyncMode}}function o(){var e="angularUtils.directives.dirPagination.template";this.setPath=function(t){e=t},this.$get=function(){return{getPath:function(){return e}}}}var s,g="angularUtils.directives.dirPagination",u="__default";try{s=angular.module(g)}catch(c){s=angular.module(g,[])}s.directive("dirPaginate",["$compile","$parse","paginationService",e]).directive("dirPaginateNoCompile",t).directive("dirPaginationControls",["paginationService","paginationTemplate",i]).filter("itemsPerPage",["paginationService",a]).service("paginationService",r).provider("paginationTemplate",o).run(["$templateCache",n])}();
app.factory("homeProductComboService",["$http","$q","$location","commonUtilService",function(e,o){return{getFirstThree:function(r){var t=o.defer(),c=e.post("api/product_combo_rest/getFirstThree",r);return c.success(function(e){t.resolve(e)}),t.promise}}}]);
app.factory("homeProductFeatureService",["$http","$q","$location","commonUtilService",function(e,t){return{getAll:function(r){var o=t.defer(),u=e.post("api/product_feature_rest/getAll",r);return u.success(function(e){o.resolve(e)}),o.promise},getProductFeatureById:function(r){var o=t.defer(),u=e.post("api/product_feature_rest/getProductFeatureById",r);return u.success(function(e){o.resolve(e)}),o.promise}}}]);
app.factory("paymentService",["$http","$q","commonUtilService",function(e,t,r){return{getFirstThree:function(r){var s=t.defer(),o=e.post("api/payment_rest/getFirstThree",r);return o.success(function(e){s.resolve(e)}),s.promise},getProductComboAndDetailsById:function(r){var s=t.defer(),o=e.post("api/payment_rest/getProductComboAndDetailsById",r);return o.success(function(e){s.resolve(e)}),s.promise},getAllPlanHasDevice:function(r){var s=t.defer(),o=e.post("api/payment_rest/getAllPlanHasDevice",r);return o.success(function(e){s.resolve(e)}),s.promise},checkout:function(s){var o=t.defer(),n=e.post("api/service_rest/checkout",s);return n.success(function(e){console.log(e);var t=e;t.hasErrors?r.toastError(t.errorMap):(r.toastSuccess(t.successMap),window.location.href="/api/payment_express_rest/make_payment_service/"+t.model.id+"/"+t.model.total_amount)}),o.promise}}}]);
function AllMessagesController(e,s,n){function t(s){n.getResultsPage(s).then(function(s){e.pagination.messages.length=0;for(var n in s){var t=[];t.push(s[n].id),t.push(s[n].email),t.push(s[n].is_replied),t.push(s[n].received_datetime),t.push(s[n].replied_datetime),e.pagination.messages.push(t)}})}e.pagination={keywords:"",pageSize:18,currentPage:1,messages:[]},t(e.pagination),e.filterMessages=function(e){t(e)},e.doneReply=function(a){var o={id:a};n.doneReply(o).then(function(n){n.hasErrors?s.toastError(n.errorMap):s.toastSuccess(n.successMap),t(e.pagination)})}}AllMessagesController.$inject=["$scope","commonUtilService","contactUsService"],app.controller("AllMessagesController",AllMessagesController);
function EditMessageController(e,t,s,r,o){function i(){o.getMessageById(t.message).then(function(s){t.message=s,"[]"==JSON.stringify(t.message)&&e.path("/manager/home")})}t.config={langType:"en",resizeType:0,width:"100%",items:["preview","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","removeformat","|","justifyleft","justifycenter","justifyright","insertorderedlist","insertunorderedlist","|","link"]},t.message={id:s.id},i(),t.reply=function(){o.reply(t.message).then(function(t){t.hasErrors?r.toastError(t.errorMap):(r.toastSuccess(t.successMap),e.path("/manager/contact_us/all_messages"))})}}EditMessageController.$inject=["$location","$scope","$routeParams","commonUtilService","contactUsService"],app.controller("EditMessageController",EditMessageController);
function AllManagersController(n,a,e){function r(a){e.getResultsPage(a).then(function(a){n.pagination.managers.length=0;for(var e in a){var r=[];r.push(a[e].id),r.push(a[e].account),r.push(a[e].role),r.push(a[e].first_name),r.push(a[e].last_name),r.push(a[e].email),r.push(a[e].mobile),r.push(a[e].landline),n.pagination.managers.push(r)}})}n.pagination={keywords:"",pageSize:18,currentPage:1,managers:[]},r(n.pagination),n.deleteManager=function(o){var t={id:o};e["delete"](t).then(function(e){e.hasErrors?a.toastError(e.errorMap):a.toastSuccess(e.successMap),n.pagination.keywords="",n.pagination.currentPage=1,r(n.pagination)})},n.filterManager=function(n){r(n)}}AllManagersController.$inject=["$scope","commonUtilService","managerService"],app.controller("AllManagersController",AllManagersController);
function EditManagerController(a,t,n,e,i){function o(){e.getManagerById(t.manager).then(function(n){t.manager=n,"[]"==JSON.stringify(t.manager)?a.path("/manager/home"):i.getMatchedAuthorizationLinkagesStatus(t.manager.authorized_paths).then(function(a){t.authorization_linkages_status=a})})}t.manager={id:n.id},t.authorization_linkages_path=i.getAuthorizationLinkagesPath(),t.authorization_linkages_status={},o(),t.update=function(a){i.getFinalSelectedAuthorizedPaths(a,t.authorization_linkages_status,t.authorization_linkages_path),e.update(a)}}EditManagerController.$inject=["$location","$scope","$routeParams","managerService","authorizationService"],app.controller("EditManagerController",EditManagerController);
function NewManagerController(a,t,e){a.manager={},a.authorization_linkages_path=e.getAuthorizationLinkagesPath(),a.authorization_linkages_status=e.getAuthorizationLinkagesStatus(),a.create=function(n){e.getFinalSelectedAuthorizedPaths(n,a.authorization_linkages_status,a.authorization_linkages_path),t.create(n)}}NewManagerController.$inject=["$scope","managerService","authorizationService"],app.controller("NewManagerController",NewManagerController);
app.factory("contactUsService",["$http","$q",function(e,s){return{getResultsPage:function(t){var r=s.defer(),n=e.post("api/manager_contact_us/rest/getResultsPage",t);return n.success(function(e){r.resolve(e)}),r.promise},getMessageById:function(t){var r=s.defer(),n=e.post("api/manager_contact_us/rest/getMessageById",t);return n.success(function(e){r.resolve(e)}),r.promise},doneReply:function(t){var r=s.defer(),n=e.post("api/manager_contact_us/rest/doneReply",t);return n.success(function(e){r.resolve(e)}),r.promise},reply:function(t){var r=s.defer(),n=e.post("api/manager_contact_us/rest/reply",t);return n.success(function(e){r.resolve(e)}),r.promise}}}]);
app.factory("authorizationService",["$q",function(e){function a(){return i}function l(){return{"New Product Combo":"/manager/product/product_combo/new","All Product Combos":"/manager/product/product_combo/all","Edit Product Combo":"/manager/product/product_combo/edit","New Product Feature":"/manager/product/product_feature/new","All Product Features":"/manager/product/product_feature/all","Edit Product Feature":"/manager/product/product_feature/edit","New Plan":"/manager/product/plan/new","All Plans":"/manager/product/plan/all","Edit Plan":"/manager/product/plan/edit","New Device":"/manager/product/device/new","All Devices":"/manager/product/device/all","Edit Device":"/manager/product/device/edit","New Service":"/manager/service/new","All Services":"/manager/service/all","All Provisions":"/manager/service/provision/all","New Billing":"/manager/billing/bill/new","All Billings":"/manager/billing/bill/all","New Invoice":"/manager/billing/invoice/new","All Invoices":"/manager/billing/invoice/all","New Sales":"/manager/sales/new","All Sales":"/manager/sales/all","All Sell":"/manager/sales/sell/all","All Commission":"/manager/sales/commission/all","New Manager":"/manager/new","All Managers":"/manager/all","Edit Manager":"/manager/edit","All Messages":"/manager/contact_us/message/all","Edit Message":"/manager/contact_us/message/edit"}}function r(r){var n=e.defer();if("null"!==r){r=r.split(",");for(var i in r)for(var t in l())l()[t]==r[i]&&(a()[t]=!0)}return n.resolve(a()),n.promise}function n(e,a,l){var r="",n=1,i=0;for(var t in a)a[t]&&i++;for(t in a)a[t]&&(r+=l[t],i>n&&(r+=","),n++);return e.authorized_paths=i>0?r:"null",e}var i={"New Product Combo":!1,"All Product Combos":!1,"Edit Product Combo":!1,"New Product Feature":!1,"All Product Features":!1,"Edit Product Feature":!1,"New Plan":!1,"All Plans":!1,"Edit Plan":!1,"New Device":!1,"All Devices":!1,"Edit Device":!1,"New Service":!1,"All Services":!1,"All Provisions":!1,"New Billing":!1,"All Billings":!1,"New Invoice":!1,"All Invoices":!1,"New Sales":!1,"All Sales":!1,"All Sell":!1,"All Commission":!1,"New Manager":!1,"All Managers":!1,"Edit Manager":!1,"All Messages":!1,"Edit Message":!1};return{getAuthorizationLinkagesStatus:a,getAuthorizationLinkagesPath:l,getMatchedAuthorizationLinkagesStatus:r,getFinalSelectedAuthorizedPaths:n}}]);
app.factory("homeService",["$http","$q",function(e,o){return{getHomeInfo:function(r){var t=o.defer(),n=e.post("api/manager/rest/getHomeInfo",r);return n.success(function(e){t.resolve(e)}),t.promise}}}]);
app.factory("managerService",["$http","$q","$location","commonUtilService",function(r,e,a,t){return{updateMyProfile:function(e){var s=r.post("api/manager/rest/updateMyProfile",e);s.then(function(r){var e=r.data;e.hasErrors?t.toastError(e.errorMap):(t.toastSuccess(e.successMap),a.path("/manager/home"))})},getResultsPage:function(a){var t=e.defer(),s=r.post("api/manager/rest/getResultsPage",a);return s.success(function(r){t.resolve(r)}),t.promise},getManagerById:function(a){var t=e.defer(),s=r.post("api/manager/rest/getManagerById",a);return s.success(function(r){t.resolve(r)}),t.promise},update:function(e){var s=r.post("api/manager/rest/update",e);s.then(function(r){var e=r.data;e.hasErrors?t.toastError(e.errorMap):(t.toastSuccess(e.successMap),a.path("/manager/all"))})},create:function(e){var s=r.post("api/manager/rest/create",e);s.then(function(r){var e=r.data;e.hasErrors?t.toastError(e.errorMap):(t.toastSuccess(e.successMap),a.path("/manager/all"))})},checkAccountExisted:function(e){var a=r.post("api/manager/rest/check_account_existed",e);a.then(function(r){var e=r.data;e.hasErrors&&t.toastError(e.errorMap)})},"delete":function(a){var t=e.defer(),s=r.post("api/manager/rest/delete",a);return s.success(function(r){t.resolve(r)}),t.promise}}}]);
app.factory("sessionService",["$http","$q","$location","commonUtilService",function(o,n,e,s){return{login:function(n){var a=o.post("api/manager/session_control/login",n);a.then(function(o){var n=o.data;n.hasErrors?(s.toastError(n.errorMap),e.path("/manager/login")):(s.toastSuccess(n.successMap),e.path("/manager/home"))})},logout:function(){var n=o.post("api/manager/session_control/logout");n.then(function(o){var n=o.data;s.toastSuccess(n.successMap),e.path("/manager/login")})},isLoggedIn:function(){var e=n.defer(),s=o.get("api/manager/session_control/isLoggedIn");return s.success(function(o){e.resolve(o)}),e.promise},getManagerSession:function(e){var s=n.defer(),a=o.get("api/manager/session_control/getManagerSession",e);return a.success(function(o){s.resolve(o)}),s.promise}}}]);
app.factory("addonServiceService",["$http","$q","$location","commonUtilService",function(e,r,t,a){return{getResultsPage:function(t){var a=r.defer(),o=e.post("api/manager_product/addon_service_rest/getResultsPage",t);return o.success(function(e){a.resolve(e)}),a.promise},getAddonServiceById:function(t){var a=r.defer(),o=e.post("api/manager_product/addon_service_rest/getAddonServiceById",t);return o.success(function(e){a.resolve(e)}),a.promise},update:function(r){var o=e.post("api/manager_product/addon_service_rest/update",r);o.then(function(e){var r=e.data;r.hasErrors?a.toastError(r.errorMap):(a.toastSuccess(r.successMap),t.path("/manager/product/addon_service/all"))})},create:function(r){var o=e.post("api/manager_product/addon_service_rest/create",r);o.then(function(e){var r=e.data;r.hasErrors?a.toastError(r.errorMap):(a.toastSuccess(r.successMap),t.path("/manager/product/addon_service/all"))})},"delete":function(t){var a=r.defer(),o=e.post("api/manager_product/addon_service_rest/delete",t);return o.success(function(e){a.resolve(e)}),a.promise}}}]);
app.factory("deviceService",["$http","$q","$location","commonUtilService",function(e,r,t,a){return{getResultsPage:function(t){var a=r.defer(),c=e.post("api/manager_product/device_rest/getResultsPage",t);return c.success(function(e){a.resolve(e)}),a.promise},getAll:function(t){var a=r.defer(),c=e.post("api/manager_product/device_rest/getAll",t);return c.success(function(e){a.resolve(e)}),a.promise},getDeviceById:function(t){var a=r.defer(),c=e.post("api/manager_product/device_rest/getDeviceById",t);return c.success(function(e){a.resolve(e)}),a.promise},update:function(r){var c=e.post("api/manager_product/device_rest/update",r);c.then(function(e){var r=e.data;r.hasErrors?a.toastError(r.errorMap):(a.toastSuccess(r.successMap),t.path("/manager/product/device/all"))})},create:function(r){var c=e.post("api/manager_product/device_rest/create",r);c.then(function(e){var r=e.data;r.hasErrors?a.toastError(r.errorMap):(a.toastSuccess(r.successMap),t.path("/manager/product/device/all"))})},"delete":function(t){var a=r.defer(),c=e.post("api/manager_product/device_rest/delete",t);return c.success(function(e){a.resolve(e)}),a.promise}}}]);
app.factory("planService",["$http","$q","$location","commonUtilService",function(e,r,t,a){return{getResultsPage:function(t){var a=r.defer(),n=e.post("api/manager_product/plan_rest/getResultsPage",t);return n.success(function(e){a.resolve(e)}),a.promise},getAll:function(t){var a=r.defer(),n=e.post("api/manager_product/plan_rest/getAll",t);return n.success(function(e){a.resolve(e)}),a.promise},getPlanById:function(t){var a=r.defer(),n=e.post("api/manager_product/plan_rest/getPlanById",t);return n.success(function(e){a.resolve(e)}),a.promise},update:function(r){var n=e.post("api/manager_product/plan_rest/update",r);n.then(function(e){var r=e.data;r.hasErrors?a.toastError(r.errorMap):(a.toastSuccess(r.successMap),t.path("/manager/product/plan/all"))})},create:function(r){var n=e.post("api/manager_product/plan_rest/create",r);n.then(function(e){var r=e.data;r.hasErrors?a.toastError(r.errorMap):(a.toastSuccess(r.successMap),t.path("/manager/product/plan/all"))})},"delete":function(t){var a=r.defer(),n=e.post("api/manager_product/plan_rest/delete",t);return n.success(function(e){a.resolve(e)}),a.promise},goUp:function(t){var a=r.defer(),n=e.post("api/manager_product/plan_rest/go_up",t);return n.success(function(e){a.resolve(e)}),a.promise},goDown:function(t){var a=r.defer(),n=e.post("api/manager_product/plan_rest/go_down",t);return n.success(function(e){a.resolve(e)}),a.promise}}}]);
app.factory("productComboService",["$http","$q","$location","commonUtilService",function(o,r,t,e){return{getResultsPage:function(t){var e=r.defer(),c=o.post("api/manager_product/product_combo_rest/getResultsPage",t);return c.success(function(o){e.resolve(o)}),e.promise},getAll:function(t){var e=r.defer(),c=o.post("api/manager_product/product_combo_rest/getAll",t);return c.success(function(o){e.resolve(o)}),e.promise},getProductComboById:function(t){var e=r.defer(),c=o.post("api/manager_product/product_combo_rest/getProductComboById",t);return c.success(function(o){e.resolve(o)}),e.promise},update:function(r){var c=o.post("api/manager_product/product_combo_rest/update",r);c.then(function(o){var r=o.data;r.hasErrors?e.toastError(r.errorMap):(e.toastSuccess(r.successMap),t.path("/manager/product/product_combo/all"))})},create:function(r){var c=o.post("api/manager_product/product_combo_rest/create",r);c.then(function(o){var r=o.data;r.hasErrors?e.toastError(r.errorMap):(e.toastSuccess(r.successMap),t.path("/manager/product/product_combo/all"))})},deleteProductCombo:function(t){var e=r.defer(),c=o.post("api/manager_product/product_combo_rest/delete",t);return c.success(function(o){e.resolve(o)}),e.promise},goUp:function(t){var e=r.defer(),c=o.post("api/manager_product/product_combo_rest/go_up",t);return c.success(function(o){e.resolve(o)}),e.promise},goDown:function(t){var e=r.defer(),c=o.post("api/manager_product/product_combo_rest/go_down",t);return c.success(function(o){e.resolve(o)}),e.promise}}}]);
app.factory("productFeatureService",["$http","$q","$location","commonUtilService",function(e,r,t,o){return{getResultsPage:function(t){var o=r.defer(),a=e.post("api/manager_product/product_feature_rest/getResultsPage",t);return a.success(function(e){o.resolve(e)}),o.promise},getAll:function(t){var o=r.defer(),a=e.post("api/manager_product/product_feature_rest/getAll",t);return a.success(function(e){o.resolve(e)}),o.promise},getProductFeatureById:function(t){var o=r.defer(),a=e.post("api/manager_product/product_feature_rest/getProductFeatureById",t);return a.success(function(e){o.resolve(e)}),o.promise},update:function(r){var a=e.post("api/manager_product/product_feature_rest/update",r);a.then(function(e){var r=e.data;r.hasErrors?o.toastError(r.errorMap):(o.toastSuccess(r.successMap),t.path("/manager/product/product_feature/all"))})},create:function(r){var a=e.post("api/manager_product/product_feature_rest/create",r);a.then(function(e){var r=e.data;r.hasErrors?o.toastError(r.errorMap):(o.toastSuccess(r.successMap),t.path("/manager/product/product_feature/all"))})},"delete":function(t){var o=r.defer(),a=e.post("api/manager_product/product_feature_rest/delete",t);return a.success(function(e){o.resolve(e)}),o.promise},goUp:function(t){var o=r.defer(),a=e.post("api/manager_product/product_feature_rest/go_up",t);return a.success(function(e){o.resolve(e)}),o.promise},goDown:function(t){var o=r.defer(),a=e.post("api/manager_product/product_feature_rest/go_down",t);return a.success(function(e){o.resolve(e)}),o.promise}}}]);
function AllAddonServicesController(e,n,o){function i(n){o.getResultsPage(n).then(function(n){e.pagination.addonServices.length=0,e.pagination.realLength=n.length;for(var o in n){var i=[];i.push(n[o].id),i.push(n[o].name),i.push(n[o].lump_fee),i.push(n[o].weekly_fee),i.push(n[o].monthly_fee),i.push(n[o].annual_fee),i.push(n[o].is_lump_accepted),i.push(n[o].is_weekly_accepted),i.push(n[o].is_monthly_accepted),i.push(n[o].is_annual_accepted),i.push(n[o].is_on_shelf),e.pagination.addonServices.push(i)}})}e.pagination={keywords:"",pageSize:18,currentPage:1,addonServices:[]},i(e.pagination),e.deleteAddonService=function(a){var t={id:a};o["delete"](t).then(function(o){o.hasErrors?n.toastError(o.errorMap):n.toastSuccess(o.successMap),e.pagination.keywords="",e.pagination.currentPage=1,i(e.pagination)})},e.filterAddonService=function(){i(e.pagination)}}AllAddonServicesController.$inject=["$scope","commonUtilService","addonServiceService"],app.controller("AllAddonServicesController",AllAddonServicesController);
function EditAddonServiceController(e,d,c,n){function i(){n.getAddonServiceById(d.addonService).then(function(c){d.addonService=c,"[]"==JSON.stringify(d.addonService)&&e.path("/manager/home")})}d.addonService={id:c.id,is_lump_accepted:c.is_lump_accepted,is_weekly_accepted:c.is_weekly_accepted,is_monthly_accepted:c.is_monthly_accepted,is_annual_accepted:c.is_annual_accepted,is_on_shelf:c.is_on_shelf},i(),d.update=function(){"NO"==d.addonService.is_lump_accepted&&(d.addonService.lump_fee=""),"NO"==d.addonService.is_weekly_accepted&&(d.addonService.weekly_fee=""),"NO"==d.addonService.is_monthly_accepted&&(d.addonService.monthly_fee=""),"NO"==d.addonService.is_annual_accepted&&(d.addonService.annual_fee=""),n.update(d.addonService)}}EditAddonServiceController.$inject=["$location","$scope","$routeParams","addonServiceService"],app.controller("EditAddonServiceController",EditAddonServiceController);
function NewAddonServiceController(e,c){e.addonService={is_lump_accepted:"NO",is_weekly_accepted:"NO",is_monthly_accepted:"NO",is_annual_accepted:"NO",is_on_shelf:"YES"},e.create=function(){"NO"==e.addonService.is_lump_accepted&&(e.addonService.lump_fee=""),"NO"==e.addonService.is_weekly_accepted&&(e.addonService.weekly_fee=""),"NO"==e.addonService.is_monthly_accepted&&(e.addonService.monthly_fee=""),"NO"==e.addonService.is_annual_accepted&&(e.addonService.annual_fee=""),c.create(e.addonService)}}NewAddonServiceController.$inject=["$scope","addonServiceService"],app.controller("NewAddonServiceController",NewAddonServiceController);
function AllDevicesController(e,n,i){function t(n){i.getResultsPage(n).then(function(n){e.pagination.devices.length=0,e.pagination.realLength=n.length;for(var i in n){var t=[];t.push(n[i].id),t.push(n[i].name),t.push(n[i].lump_fee),t.push(n[i].weekly_fee),t.push(n[i].monthly_fee),t.push(n[i].annual_fee),t.push(n[i].is_lump_accepted),t.push(n[i].is_weekly_accepted),t.push(n[i].is_monthly_accepted),t.push(n[i].is_annual_accepted),t.push(n[i].is_on_shelf),e.pagination.devices.push(t)}})}e.pagination={keywords:"",pageSize:18,currentPage:1,devices:[]},t(e.pagination),e.deleteDevice=function(a){var o={id:a};i["delete"](o).then(function(i){i.hasErrors?n.toastError(i.errorMap):n.toastSuccess(i.successMap),e.pagination.keywords="",e.pagination.currentPage=1,t(e.pagination)})},e.filterDevice=function(){t(e.pagination)}}AllDevicesController.$inject=["$scope","commonUtilService","deviceService"],app.controller("AllDevicesController",AllDevicesController);
function EditDeviceController(e,c,i,t){function d(){t.getDeviceById(c.device).then(function(i){c.device=i,"[]"==JSON.stringify(c.device)&&e.path("/manager/home")})}c.device={id:i.id,is_lump_accepted:i.is_lump_accepted,is_weekly_accepted:i.is_weekly_accepted,is_monthly_accepted:i.is_monthly_accepted,is_annual_accepted:i.is_annual_accepted,is_on_shelf:i.is_on_shelf},d(),c.update=function(){"NO"==c.device.is_lump_accepted&&(c.device.lump_fee=""),"NO"==c.device.is_weekly_accepted&&(c.device.weekly_fee=""),"NO"==c.device.is_monthly_accepted&&(c.device.monthly_fee=""),"NO"==c.device.is_annual_accepted&&(c.device.annual_fee=""),t.update(c.device)}}EditDeviceController.$inject=["$location","$scope","$routeParams","deviceService"],app.controller("EditDeviceController",EditDeviceController);
function NewDeviceController(e,c){e.device={is_lump_accepted:"NO",is_weekly_accepted:"NO",is_monthly_accepted:"NO",is_annual_accepted:"NO",is_on_shelf:"YES"},e.create=function(){"NO"==e.device.is_lump_accepted&&(e.device.lump_fee=""),"NO"==e.device.is_weekly_accepted&&(e.device.weekly_fee=""),"NO"==e.device.is_monthly_accepted&&(e.device.monthly_fee=""),"NO"==e.device.is_annual_accepted&&(e.device.annual_fee=""),c.create(e.device)}}NewDeviceController.$inject=["$scope","deviceService"],app.controller("NewDeviceController",NewDeviceController);
function AllPlansController(n,e,a){function l(e){a.getResultsPage(e).then(function(e){n.pagination.plans.length=0,n.pagination.realLength=e.length;for(var a in e){var l=[];l.push(e[a].id),l.push(e[a].name),l.push(e[a].lump_fee),l.push(e[a].weekly_fee),l.push(e[a].monthly_fee),l.push(e[a].annual_fee),l.push(e[a].is_lump_accepted),l.push(e[a].is_weekly_accepted),l.push(e[a].is_monthly_accepted),l.push(e[a].is_annual_accepted),l.push(e[a].is_on_shelf),n.pagination.plans.push(l)}})}n.pagination={keywords:"",pageSize:18,currentPage:1,plans:[]},l(n.pagination),n.deletePlan=function(t){var o={id:t};a["delete"](o).then(function(a){a.hasErrors?e.toastError(a.errorMap):e.toastSuccess(a.successMap),n.pagination.keywords="",n.pagination.currentPage=1,l(n.pagination)})},n.filterPlan=function(){l(n.pagination)}}AllPlansController.$inject=["$scope","commonUtilService","planService"],app.controller("AllPlansController",AllPlansController);
function EditPlanController(e,i,n,a,l){function c(){a.getPlanById(i.plan).then(function(n){i.plan=n,"[]"==JSON.stringify(i.plan)?e.path("/manager/home"):l.getAll().then(function(e){i.devices=[];for(var n in e){var a={};if(a.id=e[n].id,a.name=e[n].name,null!==i.plan.device_ids&&-1!==i.plan.device_ids.indexOf(a.id)){var l=i.plan.device_ids.split("^_greenspot_^");for(var c in l)if(a.is_checked=!1,l[c]==a.id){a.is_checked=!0;break}}i.devices.push(a)}})})}i.plan={id:n.id,is_lump_accepted:n.is_lump_accepted,is_weekly_accepted:n.is_weekly_accepted,is_monthly_accepted:n.is_monthly_accepted,is_annual_accepted:n.is_annual_accepted,is_on_shelf:n.is_on_shelf},c(),i.update=function(){"NO"==i.plan.is_lump_accepted&&(i.plan.lump_fee=""),"NO"==i.plan.is_weekly_accepted&&(i.plan.weekly_fee=""),"NO"==i.plan.is_monthly_accepted&&(i.plan.monthly_fee=""),"NO"==i.plan.is_annual_accepted&&(i.plan.annual_fee=""),i.device_ids="";for(var e in i.devices)i.devices[e].is_checked&&(i.device_ids+=i.devices[e].id,i.device_ids+="^_greenspot_^");i.plan.device_ids=i.device_ids.substr(0,i.device_ids.lastIndexOf("^_greenspot_^")),a.update(i.plan)}}EditPlanController.$inject=["$location","$scope","$routeParams","planService","deviceService"],app.controller("EditPlanController",EditPlanController);
function NewPlanController(e,n,c){e.plan={is_lump_accepted:"NO",is_weekly_accepted:"NO",is_monthly_accepted:"NO",is_annual_accepted:"NO",is_on_shelf:"YES"},c.getAll().then(function(n){e.devices=[];for(var c in n){var l={};l.id=n[c].id,l.name=n[c].name,l.is_checked=!1,e.devices.push(l)}}),e.create=function(){"NO"==e.plan.is_lump_accepted&&(e.plan.lump_fee=""),"NO"==e.plan.is_weekly_accepted&&(e.plan.weekly_fee=""),"NO"==e.plan.is_monthly_accepted&&(e.plan.monthly_fee=""),"NO"==e.plan.is_annual_accepted&&(e.plan.annual_fee=""),e.device_ids="";for(var c in e.devices)e.devices[c].is_checked&&(e.device_ids+=e.devices[c].id,e.device_ids+="^_greenspot_^");e.plan.device_ids=e.device_ids.substr(0,e.device_ids.lastIndexOf("^_greenspot_^")),n.create(e.plan)}}NewPlanController.$inject=["$scope","planService","deviceService"],app.controller("NewPlanController",NewPlanController);
function AllProductCombosController(o,n,r){function t(n){r.getResultsPage(n).then(function(n){o.pagination.productCombos.length=0,o.pagination.realLength=n.length;for(var r in n){var t=[];t.push(n[r].id),t.push(n[r].name),t.push(n[r].shipping_fee),t.push(n[r].fee_on_home_page),t.push(n[r].pay_frequency_on_home_page),t.push(n[r].sequence),t.push(n[r].is_on_home_page),t.push(n[r].is_on_shelf),o.pagination.productCombos.push(t)}})}o.pagination={keywords:"",pageSize:18,currentPage:1,productCombos:[]},t(o.pagination),o.deleteProductCombo=function(e){var a={id:e};r.deleteProductCombo(a).then(function(r){r.hasErrors?n.toastError(r.errorMap):n.toastSuccess(r.successMap),o.pagination.keywords="",o.pagination.currentPage=1,t(o.pagination)})},o.filterProductCombo=function(){t(o.pagination)},o.goUp=function(e){var a={id:e};r.goUp(a).then(function(r){r.hasErrors?n.toastError(r.errorMap):n.toastSuccess(r.successMap),t(o.pagination)})},o.goDown=function(e){var a={id:e};r.goDown(a).then(function(r){r.hasErrors?n.toastError(r.errorMap):n.toastSuccess(r.successMap),t(o.pagination)})}}AllProductCombosController.$inject=["$scope","commonUtilService","productComboService"],app.controller("AllProductCombosController",AllProductCombosController);
function EditProductComboController(o,e,r,t,d,i){function n(){t.getProductComboById(e.productCombo).then(function(r){e.productCombo=r,"[]"==JSON.stringify(e.productCombo)?o.path("/manager/home"):(i.getAll().then(function(o){e.plans=[];for(var r in o){var t={};if(t.id=o[r].id,t.name=o[r].name,null!==e.productCombo.plan_ids&&-1!==e.productCombo.plan_ids.indexOf(t.id)){var d=e.productCombo.plan_ids.split("^_greenspot_^");for(var i in d)if(t.is_checked=!1,d[i]==t.id){t.is_checked=!0;break}}e.plans.push(t)}}),d.getAll().then(function(o){e.product_features=[];for(var r in o){var t={};if(t.id=o[r].id,t.name=o[r].name,null!==e.productCombo.feature_ids&&-1!==e.productCombo.feature_ids.indexOf(t.id)){var d=e.productCombo.feature_ids.split("^_greenspot_^");for(var i in d)if(t.is_checked=!1,d[i]==t.id){t.is_checked=!0;break}}e.product_features.push(t)}}))})}e.productCombo={id:r.id,pay_frequency_on_home_page:r.pay_frequency_on_home_page,is_on_home_page:r.is_on_home_page,is_on_shelf:r.is_on_shelf},n(),e.update=function(){e.feature_ids="";for(var o in e.product_features)e.product_features[o].is_checked&&(e.feature_ids+=e.product_features[o].id,e.feature_ids+="^_greenspot_^");e.productCombo.feature_ids=e.feature_ids.substr(0,e.feature_ids.lastIndexOf("^_greenspot_^")),e.plan_ids="";for(var r in e.plans)e.plans[r].is_checked&&(e.plan_ids+=e.plans[r].id,e.plan_ids+="^_greenspot_^");e.productCombo.plan_ids=e.plan_ids.substr(0,e.plan_ids.lastIndexOf("^_greenspot_^")),""===e.productCombo.feature_ids&&(e.productCombo.feature_ids="none"),""===e.productCombo.device_ids&&(e.productCombo.device_ids="none"),""===e.productCombo.plan_ids&&(e.productCombo.plan_ids="none"),t.update(e.productCombo)}}EditProductComboController.$inject=["$location","$scope","$routeParams","productComboService","productFeatureService","planService"],app.controller("EditProductComboController",EditProductComboController);
function NewProductComboController(e,o,r,t){e.productCombo={pay_frequency_on_home_page:"ANNUAL",is_on_home_page:"NO",is_on_shelf:"YES"},t.getAll().then(function(o){e.plans=[];for(var r in o){var t={};t.id=o[r].id,t.name=o[r].name,t.is_checked=!1,e.plans.push(t)}}),r.getAll().then(function(o){e.product_features=[];for(var r in o){var t={};t.id=o[r].id,t.name=o[r].name,t.is_checked=!1,e.product_features.push(t)}}),e.create=function(){e.feature_ids="";for(var r in e.product_features)e.product_features[r].is_checked&&(e.feature_ids+=e.product_features[r].id,e.feature_ids+="^_greenspot_^");e.productCombo.feature_ids=e.feature_ids.substr(0,e.feature_ids.lastIndexOf("^_greenspot_^")),e.plan_ids="";for(var t in e.plans)e.plans[t].is_checked&&(e.plan_ids+=e.plans[t].id,e.plan_ids+="^_greenspot_^");e.productCombo.plan_ids=e.plan_ids.substr(0,e.plan_ids.lastIndexOf("^_greenspot_^")),o.create(e.productCombo)}}NewProductComboController.$inject=["$scope","productComboService","productFeatureService","planService"],app.controller("NewProductComboController",NewProductComboController);
function AllProductFeaturesController(t,r,e){function o(r){e.getResultsPage(r).then(function(r){t.pagination.productFeatures.length=0,t.pagination.realLength=r.length;for(var e in r){var o=[];o.push(r[e].id),o.push(r[e].name),o.push(r[e].sequence),o.push(r[e].is_on_home_page),t.pagination.productFeatures.push(o)}})}t.pagination={keywords:"",pageSize:18,currentPage:1,productFeatures:[]},o(t.pagination),t.deleteProductFeature=function(n){var a={id:n};e["delete"](a).then(function(e){e.hasErrors?r.toastError(e.errorMap):r.toastSuccess(e.successMap),t.pagination.keywords="",t.pagination.currentPage=1,o(t.pagination)})},t.filterProductFeature=function(){o(t.pagination)},t.goUp=function(n){var a={id:n};e.goUp(a).then(function(e){e.hasErrors?r.toastError(e.errorMap):r.toastSuccess(e.successMap),o(t.pagination)})},t.goDown=function(n){var a={id:n};e.goDown(a).then(function(e){e.hasErrors?r.toastError(e.errorMap):r.toastSuccess(e.successMap),o(t.pagination)})}}AllProductFeaturesController.$inject=["$scope","commonUtilService","productFeatureService"],app.controller("AllProductFeaturesController",AllProductFeaturesController);
function EditProductFeatureController(t,e,r,o){function u(){o.getProductFeatureById(e.productFeature).then(function(r){e.productFeature=r,"[]"==JSON.stringify(e.productFeature)&&t.path("/manager/home")})}e.productFeature={id:r.id,is_on_home_page:r.is_on_home_page},u(),e.update=function(){o.update(e.productFeature)}}EditProductFeatureController.$inject=["$location","$scope","$routeParams","productFeatureService"],app.controller("EditProductFeatureController",EditProductFeatureController);
function NewProductFeatureController(e,r){e.productFeature={is_on_home_page:"NO"},e.create=function(){r.create(e.productFeature)}}NewProductFeatureController.$inject=["$scope","productFeatureService"],app.controller("NewProductFeatureController",NewProductFeatureController);